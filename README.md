# üèÆ Kad Kong Ta Smart Insight

‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ ‡∏ñ‡∏ô‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏Å‡∏≤‡∏î‡∏Å‡πâ‡∏≠‡∏á‡∏ï‡∏≤ ‡∏•‡∏≥‡∏õ‡∏≤‡∏á

**Version 2.0 - Minimal**

---

## üìã ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£

| ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥ | ‚ùå ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ó‡∏≥ |
|------------|--------------|
| ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡πÉ‡∏ô Zone A, B, C | ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Real-time |
| ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥, ‡∏ù‡∏ô) | ‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏° |
| ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (PM2.5) | ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏¢ (PA) |
| ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô | ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á |
| ‡∏™‡πà‡∏á Daily Report ‡πÑ‡∏õ LINE OA | ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ |

---

## üöÄ Quick Start

### 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

```bash
# Backend
cd backend
npm install
cp .env.example .env

# Frontend
cd ../frontend
npm install
```

### 2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `backend/.env`:

```env
# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Demo - ‡πÉ‡∏ä‡πâ Mock Data
MOCK_MODE=true

# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production
MOCK_MODE=false
LINE_CHANNEL_ACCESS_TOKEN=your_token
OPENWEATHER_API_KEY=your_api_key
```

### 3. ‡∏£‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

```bash
# Terminal 1 - Backend
cd backend
npm run dev

# Terminal 2 - Frontend
cd frontend
npm run dev
```

### 4. ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå

- Frontend: http://localhost:5173
- Backend API: http://localhost:3001/api

---

## üìä API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/dashboard` | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏ß‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dashboard |
| GET | `/api/zones` | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏∏‡∏Å Zone |
| GET | `/api/zones/:code` | ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô Zone ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (A, B, C) |
| GET | `/api/weather` | ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞ PM2.5 |
| GET | `/api/reports/daily` | ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î |
| GET | `/api/reports/history` | ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 7 ‡∏ß‡∏±‡∏ô |
| POST | `/api/reports/generate` | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà |
| POST | `/api/system/refresh` | Force refresh ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• |

---

## üóÑÔ∏è Database Schema

```sql
-- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏ï‡∏≤‡∏° Zone
people_counts (id, zone_code, people_count, recorded_at)

-- ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
daily_reports (id, report_date, zone_a_total, zone_b_total, zone_c_total, 
               weather_summary, pm25_avg, pm25_level, is_sent_line)
```

---

## üì± Daily Report (LINE OA)

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÑ‡∏õ LINE Official Account ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ **18:00 ‡∏ô.**

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:

```
üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏î‡∏Å‡πâ‡∏≠‡∏á‡∏ï‡∏≤ ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô
‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå‡∏ó‡∏µ‡πà 24 ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2569

üë• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)
‚Ä¢ Zone A: 350 ‡∏Ñ‡∏ô
‚Ä¢ Zone B: 520 ‡∏Ñ‡∏ô
‚Ä¢ Zone C: 410 ‡∏Ñ‡∏ô
‚Ä¢ ‡∏£‡∏ß‡∏°: 1,280 ‡∏Ñ‡∏ô

üå¶ ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®: ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡πÅ‡∏à‡πà‡∏°‡πÉ‡∏™ (28¬∞C)

üå´ PM2.5: 35 ¬µg/m¬≥ (‡∏î‡∏µ)

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•
üèÆ Kad Kong Ta Smart Insight
```

---

## üîß Configuration

| Variable | Default | Description |
|----------|---------|-------------|
| `MOCK_MODE` | `true` | ‡πÉ‡∏ä‡πâ Mock Data ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Demo |
| `POLLING_INTERVAL` | `60000` | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (ms) |
| `DAILY_REPORT_HOUR` | `18` | ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏™‡πà‡∏á Daily Report |
| `DAILY_REPORT_MINUTE` | `0` | ‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡πà‡∏á Daily Report |

---

## üìÅ Project Structure

```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js              # Main server
‚îÇ   ‚îú‚îÄ‚îÄ config/index.js       # Configuration
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js          # Database queries
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.sql        # Database schema
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ peopleCountService.js   # ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô
‚îÇ       ‚îú‚îÄ‚îÄ weatherService.js       # Weather & PM2.5
‚îÇ       ‚îú‚îÄ‚îÄ dailyReportService.js   # Daily Report
‚îÇ       ‚îî‚îÄ‚îÄ pollingService.js       # Scheduler

frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx               # Main app
‚îÇ   ‚îú‚îÄ‚îÄ pages/Dashboard.jsx   # ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
‚îÇ   ‚îî‚îÄ‚îÄ services/api.jsx      # API calls
```

---

## üéØ ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏™‡∏£‡∏∏‡∏õ

> ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à
> ‡∏Ñ‡∏∑‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏ã‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

---

## üìù License

MIT License - Lampang Smart City Project
